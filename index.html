<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Kanit', sans-serif; }
       
        .lab-background {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%);
            position: relative;
            overflow: hidden;
        }
       
        .lab-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 119, 198, 0.2) 0%, transparent 50%);
            animation: labBubbles 20s ease-in-out infinite;
        }
       
        @keyframes labBubbles {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
       
        .microscope {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #374151, #6b7280);
            border-radius: 10px;
            position: relative;
            animation: microscopeGlow 3s ease-in-out infinite alternate;
        }
       
        .microscope::before {
            content: 'üî¨';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
        }
       
        @keyframes microscopeGlow {
            0% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
            100% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.6); }
        }
       
        .dna-helix {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #10b981, #059669);
            border-radius: 50%;
            position: relative;
            animation: dnaRotate 4s linear infinite;
        }
       
        .dna-helix::before {
            content: 'üß¨';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
        }
       
        @keyframes dnaRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
       
        .cell-animation {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #f59e0b, #d97706);
            border-radius: 50%;
            position: relative;
            animation: cellPulse 2s ease-in-out infinite;
        }
       
        .cell-animation::before {
            content: 'ü¶†';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 25px;
        }
       
        @keyframes cellPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
        }
       
        .question-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
       
        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: cardShine 3s ease-in-out infinite;
        }
       
        @keyframes cardShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
       
        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
       
        .choice-btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
       
        .choice-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
        }
       
        .choice-btn:hover::before {
            width: 100%;
            height: 100%;
        }
       
        .choice-btn.correct {
            background: linear-gradient(45deg, #10b981, #059669);
            animation: correctPulse 0.6s ease-in-out;
        }
       
        .choice-btn.wrong {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            animation: wrongShake 0.5s ease-in-out;
        }
       
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
       
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
       
        .lab-equipment {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
       
        .lab-equipment:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
        .lab-equipment:nth-child(2) { top: 20%; right: 10%; animation-delay: 2s; }
        .lab-equipment:nth-child(3) { bottom: 30%; left: 8%; animation-delay: 4s; }
        .lab-equipment:nth-child(4) { bottom: 10%; right: 5%; animation-delay: 1s; }
       
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
       
        .progress-bar {
            background: linear-gradient(90deg, #10b981, #059669);
            height: 8px;
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
       
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: progressShine 2s ease-in-out infinite;
        }
       
        @keyframes progressShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
       
        .scientist-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            animation: avatarBreathe 3s ease-in-out infinite;
        }
       
        #characterDialog {
            transition: opacity 0.3s ease-in-out;
        }
       
        @keyframes avatarBreathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
       
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 1000;
            animation: achievementSlide 3s ease-in-out;
        }
       
        @keyframes achievementSlide {
            0% { transform: translateX(100%); opacity: 0; }
            20%, 80% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }
       
        .particle-system {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }
       
        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #fbbf24;
            border-radius: 50%;
            animation: particleFloat 3s ease-out forwards;
        }
       
        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-200px) scale(0);
            }
        }
       
        .timer-critical {
            animation: timerPulse 1s infinite;
            color: #ef4444 !important;
        }
       
        @keyframes timerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
       
        .lab-flask {
            width: 40px;
            height: 40px;
            font-size: 30px;
            animation: bubbleReaction 4s ease-in-out infinite;
        }
       
        @keyframes bubbleReaction {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(5deg); }
            75% { transform: scale(0.9) rotate(-5deg); }
        }
    </style>
</head>
<body class="lab-background min-h-screen">
    <!-- Lab Equipment Background -->
    <div class="lab-equipment">üß™</div>
    <div class="lab-equipment">‚öóÔ∏è</div>
    <div class="lab-equipment">üî¨</div>
    <div class="lab-equipment">üß¨</div>

    <!-- Particle System -->
    <div class="particle-system" id="particleSystem"></div>

    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="question-card rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="microscope mx-auto mb-4"></div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">üß™ ‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</h1>
                <p class="text-gray-600">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</p>
                <p class="text-sm text-blue-600 mt-2">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå!</p>
            </div>
           
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</label>
                    <input type="text" id="username" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                </div>
               
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö</label>
                    <input type="password" id="password" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                </div>
               
                <button type="submit"
                        class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105">
                    üî¨ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö
                </button>
               
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <p class="text-sm text-blue-800">
                        <strong>üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:</strong> ‡∏ô‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- Tutorial Screen -->
    <div id="tutorialScreen" class="hidden min-h-screen p-4">
        <div class="max-w-4xl mx-auto">
            <div class="question-card rounded-2xl p-8 mb-6">
                <h1 class="text-4xl font-bold text-gray-800 text-center mb-8">üéì ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</h1>
               
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- Mission -->
                    <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6">
                        <h3 class="text-2xl font-bold text-blue-600 mb-4">üéØ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                        <ul class="text-gray-700 space-y-3">
                            <li class="flex items-start">
                                <span class="text-green-500 mr-2">üß¨</span>
                                <span>‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö ‡∏°.‡∏õ‡∏•‡∏≤‡∏¢</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-500 mr-2">üî¨</span>
                                <span>‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-500 mr-2">‚öóÔ∏è</span>
                                <span>‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-500 mr-2">üèÜ</span>
                                <span>‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà</span>
                            </li>
                        </ul>
                    </div>
                   
                    <!-- Lab Tools -->
                    <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-xl p-6">
                        <h3 class="text-2xl font-bold text-green-600 mb-4">üß™ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö</h3>
                        <div class="space-y-3 text-gray-700">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">üî¨</span>
                                <div>
                                    <div class="font-semibold">‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∏‡∏•‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå</div>
                                    <div class="text-sm text-gray-600">‡∏î‡∏π‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">üß¨</span>
                                <div>
                                    <div class="font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå DNA</div>
                                    <div class="text-sm text-gray-600">‡∏Ç‡πâ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">‚öóÔ∏è</span>
                                <div>
                                    <div class="font-semibold">‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                                    <div class="text-sm text-gray-600">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">ü¶†</span>
                                <div>
                                    <div class="font-semibold">‡πÄ‡∏ã‡∏£‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏°‡∏≠‡∏á</div>
                                    <div class="text-sm text-gray-600">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 2 ‡πÄ‡∏ó‡πà‡∏≤</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               
                <!-- Topics -->
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 mb-6">
                    <h3 class="text-2xl font-bold text-purple-600 mb-4">üìö ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏û‡∏ö</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-gray-700">
                        <div class="text-center">
                            <div class="text-3xl mb-2">üß¨</div>
                            <div class="font-semibold">‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-2">ü¶†</div>
                            <div class="font-semibold">‡∏à‡∏∏‡∏•‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-2">üå±</div>
                            <div class="font-semibold">‡∏û‡∏§‡∏Å‡∏©‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-2">üêõ</div>
                            <div class="font-semibold">‡∏™‡∏±‡∏ï‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</div>
                        </div>
                    </div>
                </div>
               
                <!-- Scoring -->
                <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-6 mb-6">
                    <h3 class="text-2xl font-bold text-orange-600 mb-4">üèÜ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-gray-700">
                        <div class="text-center">
                            <div class="text-3xl mb-2">‚úÖ</div>
                            <div class="font-semibold">‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å</div>
                            <div class="text-sm text-gray-600">+100 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-2">üî•</div>
                            <div class="font-semibold">‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô</div>
                            <div class="text-sm text-gray-600">‡πÇ‡∏ö‡∏ô‡∏±‡∏™ +50</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl mb-2">‚ö°</div>
                            <div class="font-semibold">‡∏ï‡∏≠‡∏ö‡πÄ‡∏£‡πá‡∏ß</div>
                            <div class="text-sm text-gray-600">‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÄ‡∏ß‡∏•‡∏≤</div>
                        </div>
                    </div>
                </div>
               
                <div class="text-center">
                    <button id="startGameBtn" class="bg-gradient-to-r from-green-600 to-blue-600 text-white px-12 py-4 rounded-xl text-xl font-bold hover:from-green-700 hover:to-blue-700 transition-all duration-300 transform hover:scale-105">
                        üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="hidden min-h-screen p-4">
        <!-- Header -->
        <div class="question-card rounded-2xl p-6 mb-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="scientist-avatar">üë®‚Äçüî¨</div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</h1>
                        <p class="text-blue-600">‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå <span id="playerName" class="font-semibold"></span></p>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold text-yellow-600" id="score">üèÜ 0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                    <div class="text-lg text-blue-600" id="level">üìä ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1</div>
                    <div class="text-lg text-green-600" id="combo">üî• 0 ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô</div>
                    <div class="text-md text-orange-600" id="timer">‚è∞ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                </div>
            </div>
           
            <!-- Progress Bar -->
            <div class="mt-4">
                <div class="flex justify-between text-sm text-gray-600 mb-2">
                    <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
                    <span id="progressText">0/10</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="progress-bar rounded-full h-2" id="progressBar" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Game Area -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Lab Tools -->
            <div class="question-card rounded-2xl p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    üß™ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö
                </h2>
               
                <div class="space-y-3">
                    <button id="microscopeBtn" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center justify-between">
                        <span>üî¨ ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∏‡∏•‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå</span>
                        <span class="text-sm" id="microscopeCount">3</span>
                    </button>
                   
                    <button id="dnaBtn" class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-600 hover:to-green-700 transition-all duration-300 flex items-center justify-between">
                        <span>üß¨ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå DNA</span>
                        <span class="text-sm" id="dnaCount">2</span>
                    </button>
                   
                    <button id="chemicalBtn" class="w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-purple-600 hover:to-purple-700 transition-all duration-300 flex items-center justify-between">
                        <span>‚öóÔ∏è ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©</span>
                        <span class="text-sm" id="chemicalCount">2</span>
                    </button>
                   
                    <button id="serumBtn" class="w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white py-3 px-4 rounded-lg font-medium hover:from-yellow-600 hover:to-yellow-700 transition-all duration-300 flex items-center justify-between">
                        <span>ü¶† ‡πÄ‡∏ã‡∏£‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏°‡∏≠‡∏á</span>
                        <span class="text-sm" id="serumCount">1</span>
                    </button>
                </div>
               
                <!-- Lab Status -->
                <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-semibold text-gray-700 mb-2">üìà ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥:</span>
                            <span class="text-green-600">25¬∞C ‚úÖ</span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô:</span>
                            <span class="text-blue-600">60% ‚úÖ</span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏£‡∏∞‡∏î‡∏±‡∏ö pH:</span>
                            <span class="text-purple-600">7.0 ‚úÖ</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Area -->
            <div class="lg:col-span-2 question-card rounded-2xl p-6">
                <!-- Character Dialog -->
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-6 border-l-4 border-blue-500">
                    <div class="flex items-start space-x-3">
                        <div class="text-4xl animate-bounce" id="characterAvatar">üë®‚Äçüî¨</div>
                        <div class="flex-1">
                            <div class="font-bold text-blue-700" id="characterName">‡∏î‡∏£.‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ ‡∏ô‡∏±‡∏Å‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</div>
                            <div class="text-gray-700 mt-1" id="characterDialog">
                                ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö! ‡∏°‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞ üß¨
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-gray-800 flex items-center">
                        <span id="questionIcon">üß¨</span>
                        <span class="ml-2" id="questionTopic">‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</span>
                    </h2>
                    <div class="flex items-center space-x-2">
                        <div class="dna-helix"></div>
                        <div class="cell-animation"></div>
                        <div class="lab-flask">üß™</div>
                        <!-- Next Button -->
                        <button id="nextBtn" class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            ‡∏Ç‡πâ‡∏≤‡∏° ‚è≠Ô∏è
                        </button>
                    </div>
                </div>
               
                <!-- Question -->
                <div class="mb-6">
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-4">
                        <p class="text-lg text-gray-800 font-medium" id="questionText">
                            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...
                        </p>
                    </div>
                   
                    <!-- Image placeholder -->
                    <div id="questionImage" class="hidden mb-4 text-center">
                        <div class="inline-block p-4 bg-gray-100 rounded-lg">
                            <span class="text-6xl" id="questionImageIcon">üî¨</span>
                        </div>
                    </div>
                </div>
               
                <!-- Choices -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="choicesContainer">
                    <!-- Choices will be generated here -->
                </div>
               
                <!-- Explanation -->
                <div id="explanation" class="hidden mt-6 p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border-l-4 border-green-500">
                    <h4 class="font-bold text-green-700 mb-2">üí° ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</h4>
                    <p class="text-gray-700" id="explanationText"></p>
                </div>
            </div>
        </div>

        <!-- Result Modal -->
        <div id="resultModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
            <div class="question-card rounded-2xl p-8 max-w-md w-full text-center">
                <div id="resultIcon" class="text-6xl mb-4">üéâ</div>
                <h3 id="resultTitle" class="text-2xl font-bold text-gray-800 mb-2">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!</h3>
                <p id="resultMessage" class="text-gray-600 mb-6">‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!</p>
                <div id="scoreBreakdown" class="bg-gray-50 rounded-lg p-4 mb-6 text-left">
                    <h4 class="font-bold text-gray-700 mb-2">üìä ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h4>
                    <div class="space-y-1 text-sm text-gray-600">
                        <div class="flex justify-between">
                            <span>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô:</span>
                            <span id="baseScore">+100</span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÄ‡∏ß‡∏•‡∏≤:</span>
                            <span id="timeBonus">+20</span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô:</span>
                            <span id="comboBonus">+50</span>
                        </div>
                        <hr class="my-2">
                        <div class="flex justify-between font-bold text-gray-800">
                            <span>‡∏£‡∏ß‡∏°:</span>
                            <span id="totalScore">+170</span>
                        </div>
                    </div>
                </div>
                <button id="nextQuestion" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
                    ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ üöÄ
                </button>
            </div>
        </div>

        <!-- Final Result Modal -->
        <div id="finalModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
            <div class="question-card rounded-2xl p-8 max-w-lg w-full text-center">
                <div class="text-6xl mb-4">üèÜ</div>
                <h3 class="text-3xl font-bold text-gray-800 mb-4">‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!</h3>
                <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6 mb-6">
                    <div class="text-4xl font-bold text-orange-600 mb-2" id="finalScore">0</div>
                    <div class="text-lg text-gray-700 mb-4">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <div class="font-bold text-green-600" id="correctCount">0</div>
                            <div class="text-gray-600">‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å</div>
                        </div>
                        <div>
                            <div class="font-bold text-red-600" id="wrongCount">0</div>
                            <div class="text-gray-600">‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î</div>
                        </div>
                    </div>
                </div>
                <div class="mb-6">
                    <div class="text-lg font-bold text-gray-800 mb-2" id="gradeText">‡πÄ‡∏Å‡∏£‡∏î A</div>
                    <div class="text-gray-600" id="gradeComment">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á!</div>
                </div>
                <button id="playAgain" class="bg-gradient-to-r from-green-600 to-blue-600 text-white px-8 py-3 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 transition-all duration-300">
                    üîÑ ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let currentQuestion = 0;
        let score = 0;
        let combo = 0;
        let timeLeft = 30;
        let gameTimer = null;
        let playerName = '';
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let isDoubleScore = false;
       
        // Character dialogs
        const characters = {
            scientist: {
                name: "‡∏î‡∏£.‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ ‡∏ô‡∏±‡∏Å‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤",
                avatar: "üë®‚Äçüî¨",
                dialogs: {
                    welcome: "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö! ‡∏°‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞ üß¨",
                    correct: ["‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üéâ", "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥! ‚ú®", "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üåü"],
                    wrong: ["‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞! üòä", "‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß! ‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡∏∞ üìö", "‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ! üí™"],
                    hint: "‡πÉ‡∏´‡πâ‡∏â‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏´‡∏ô‡πà‡∏≠‡∏¢... ‡∏î‡∏π‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏µ‡πâ! üîç",
                    timeUp: "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß! ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏ó‡πâ‡∏≠‡∏ô‡∏∞! ‚è∞",
                    encouragement: ["‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÑ‡∏î‡πâ! ‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡πÄ‡∏ñ‡∏≠‡∏∞! üí™", "‡∏™‡∏π‡πâ‡πÜ ‡∏ô‡∏∞! ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á! üåü", "‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏¢‡∏≠‡∏°‡πÅ‡∏û‡πâ! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß! ‚ú®"]
                }
            },
            assistant: {
                name: "‡∏ô‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πá‡∏ö ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
                avatar: "üë©‚Äçüî¨",
                dialogs: {
                    welcome: "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞! ‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞! üòä",
                    correct: ["‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞! üéä", "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡πà‡∏∞! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! üíñ", "‡∏î‡∏µ‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏∞! ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üå∏"],
                    wrong: ["‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏Ñ‡πà‡∏∞ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞‡∏Ñ‡∏∞! üå∫", "‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞! ‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡πâ‡∏≠‡∏ô‡∏∞‡∏Ñ‡∏∞! üå∑", "‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡πà‡∏∞ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£! üåª"],
                    hint: "‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞‡∏Ñ‡∏∞! ‡∏î‡∏π‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡πà‡∏∞! ‚ú®",
                    timeUp: "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞! ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞‡∏Ñ‡∏∞! üïê",
                    encouragement: ["‡∏™‡∏π‡πâ‡πÜ ‡∏ô‡∏∞‡∏Ñ‡∏∞! üí™", "‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞! üåü", "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞! üí´"]
                }
            },
            professor: {
                name: "‡∏®.‡∏î‡∏£.‡∏õ‡∏£‡∏≤‡∏ä‡∏ç‡πå ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÉ‡∏´‡∏ç‡πà",
                avatar: "üë®‚Äçüè´",
                dialogs: {
                    welcome: "‡πÄ‡∏≠‡∏≤‡∏•‡πà‡∏∞ ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô! ‡∏°‡∏≤‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏î‡∏µ‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô! üìñ",
                    correct: ["‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß! üìö", "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á! üéì", "‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á! üìñ"],
                    wrong: ["‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å ‡∏•‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà! ü§î", "‡∏ú‡∏¥‡∏î! ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á! üìö", "‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°! üìñ"],
                    hint: "‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ä‡πà‡∏ß‡∏¢‡∏´‡∏ô‡πà‡∏≠‡∏¢... ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ! üëÜ",
                    timeUp: "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡∏ï‡πâ‡∏≠‡∏á‡∏ù‡∏∂‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô! ‚è±Ô∏è",
                    encouragement: ["‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏∞! üìö", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏ô! üéØ", "‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡πâ‡∏≠! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Ñ‡∏∑‡∏≠‡∏û‡∏•‡∏±‡∏á! üí°"]
                }
            }
        };
       
        let currentCharacter = 'scientist';
       
        // Lab tools
        let labTools = {
            microscope: 3,  // hints
            dna: 2,         // skip question
            chemical: 2,    // add time
            serum: 1        // double score
        };

        // Biology questions (‡∏™‡∏™‡∏ß‡∏ó. ‡∏°.‡∏õ‡∏•‡∏≤‡∏¢)
        const questions = [
            {
                topic: "‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
                icon: "üß¨",
                question: "‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°‡∏Ç‡πâ‡∏≤‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞ Aa x Aa ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ü‡∏µ‡πÇ‡∏ô‡πÑ‡∏ó‡∏õ‡πå‡πÄ‡∏î‡πà‡∏ô‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ü‡∏µ‡πÇ‡∏ô‡πÑ‡∏ó‡∏õ‡πå‡∏î‡πâ‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?",
                choices: ["1:1", "2:1", "3:1", "1:3"],
                correct: 2,
                explanation: "‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°‡∏Ç‡πâ‡∏≤‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Aa x Aa ‡∏à‡∏∞‡πÑ‡∏î‡πâ AA : Aa : aa = 1:2:1 ‡∏ã‡∏∂‡πà‡∏á‡∏ü‡∏µ‡πÇ‡∏ô‡πÑ‡∏ó‡∏õ‡πå‡πÄ‡∏î‡πà‡∏ô (AA+Aa) : ‡∏ü‡∏µ‡πÇ‡∏ô‡πÑ‡∏ó‡∏õ‡πå‡∏î‡πâ‡∏≠‡∏¢ (aa) = 3:1",
                image: "üß¨"
            },
            {
                topic: "‡∏à‡∏∏‡∏•‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤",
                icon: "ü¶†",
                question: "‡πÅ‡∏ö‡∏Ñ‡∏ó‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡πÇ‡∏£‡∏Ñ‡∏õ‡∏≠‡∏î‡∏ö‡∏ß‡∏°‡πÑ‡∏î‡πâ?",
                choices: ["Streptococcus pneumoniae", "Escherichia coli", "Lactobacillus", "Rhizobium"],
                correct: 0,
                explanation: "Streptococcus pneumoniae ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏Ñ‡∏ó‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏õ‡∏≠‡∏î‡∏ö‡∏ß‡∏° (Pneumonia) ‡πÉ‡∏ô‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå",
                image: "ü¶†"
            },
            {
                topic: "‡∏û‡∏§‡∏Å‡∏©‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
                icon: "üå±",
                question: "‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏™‡∏á‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä ‡πÅ‡∏™‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏î‡∏π‡∏î‡∏ã‡∏±‡∏ö‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡πÉ‡∏î?",
                choices: ["‡∏Ñ‡∏•‡∏≠‡πÇ‡∏£‡∏ü‡∏¥‡∏•‡∏•‡πå", "‡πÅ‡∏Ñ‡πÇ‡∏£‡∏ó‡∏µ‡∏ô", "‡πÅ‡∏ã‡∏ô‡πÇ‡∏ó‡∏ü‡∏¥‡∏•‡∏•‡πå", "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏°‡∏≤"],
                correct: 3,
                explanation: "‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏™‡∏á ‡∏û‡∏∑‡∏ä‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÉ‡∏ö (‡∏Ñ‡∏•‡∏≠‡πÇ‡∏£‡∏ü‡∏¥‡∏•‡∏•‡πå) ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏™‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏Ñ‡πÇ‡∏£‡∏ó‡∏µ‡∏ô ‡πÅ‡∏•‡∏∞‡πÅ‡∏ã‡∏ô‡πÇ‡∏ó‡∏ü‡∏¥‡∏•‡∏•‡πå",
                image: "üå±"
            },
            {
                topic: "‡∏™‡∏±‡∏ï‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤",
                icon: "üêõ",
                question: "‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏•‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?",
                choices: ["‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏´‡∏á‡∏∑‡∏≠‡∏Å", "‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏≠‡∏î", "‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡πà‡∏≠‡∏•‡∏°", "‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á"],
                correct: 2,
                explanation: "‡πÅ‡∏°‡∏•‡∏á‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÅ‡∏ö‡∏ö‡∏ó‡πà‡∏≠‡∏•‡∏° (Tracheal system) ‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á",
                image: "üêõ"
            },
            {
                topic: "‡∏ä‡∏µ‡∏ß‡πÄ‡∏Ñ‡∏°‡∏µ",
                icon: "‚öóÔ∏è",
                question: "‡πÄ‡∏≠‡∏ô‡πÑ‡∏ã‡∏°‡πå‡∏ó‡∏µ‡πà‡∏¢‡πà‡∏≠‡∏¢‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏≤‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡∏∑‡∏≠?",
                choices: ["‡πÄ‡∏õ‡∏õ‡∏ã‡∏¥‡∏ô", "‡πÑ‡∏•‡πÄ‡∏õ‡∏™", "‡∏≠‡∏∞‡πÑ‡∏°‡πÄ‡∏•‡∏™", "‡∏ó‡∏£‡∏¥‡∏õ‡∏ã‡∏¥‡∏ô"],
                correct: 0,
                explanation: "‡πÄ‡∏õ‡∏õ‡∏ã‡∏¥‡∏ô (Pepsin) ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏≠‡∏ô‡πÑ‡∏ã‡∏°‡πå‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏Å‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏≤‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏¢‡πà‡∏≠‡∏¢‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô",
                image: "‚öóÔ∏è"
            },
            {
                topic: "‡∏ô‡∏¥‡πÄ‡∏ß‡∏®‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤",
                icon: "üåç",
                question: "‡πÉ‡∏ô‡∏´‡πà‡∏ß‡∏á‡πÇ‡∏ã‡πà‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏õ‡∏ê‡∏°‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∑‡∏≠?",
                choices: ["‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Å‡∏¥‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡∏ä", "‡∏û‡∏∑‡∏ä", "‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏•‡∏≤‡∏¢"],
                correct: 2,
                explanation: "‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏õ‡∏ê‡∏°‡∏†‡∏π‡∏°‡∏¥ (Primary producer) ‡∏Ñ‡∏∑‡∏≠‡∏û‡∏∑‡∏ä‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏™‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡∏•‡∏¥‡∏ï‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏≠‡∏á",
                image: "üåç"
            },
            {
                topic: "‡∏Å‡∏≤‡∏¢‡∏ß‡∏¥‡∏†‡∏≤‡∏Ñ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
                icon: "ü´Ä",
                question: "‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á?",
                choices: ["2 ‡∏´‡πâ‡∏≠‡∏á", "3 ‡∏´‡πâ‡∏≠‡∏á", "4 ‡∏´‡πâ‡∏≠‡∏á", "5 ‡∏´‡πâ‡∏≠‡∏á"],
                correct: 2,
                explanation: "‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡∏°‡∏µ 4 ‡∏´‡πâ‡∏≠‡∏á ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ ‡∏´‡πâ‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô ‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á ‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á",
                image: "ü´Ä"
            },
            {
                topic: "‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£",
                icon: "üêí",
                question: "‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏£‡πå‡∏ß‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?",
                choices: ["‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏î‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥", "‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå", "‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á‡∏¢‡∏µ‡∏ô", "‡∏Å‡∏≤‡∏£‡∏î‡∏£‡∏¥‡∏ü‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏¢‡∏µ‡∏ô"],
                correct: 0,
                explanation: "‡∏ä‡∏≤‡∏£‡πå‡∏•‡∏™‡πå ‡∏î‡∏≤‡∏£‡πå‡∏ß‡∏¥‡∏ô ‡πÄ‡∏™‡∏ô‡∏≠‡∏ó‡∏§‡∏©‡∏é‡∏µ '‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏î‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥' (Natural Selection) ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡πÑ‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£",
                image: "üêí"
            },
            {
                topic: "‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÇ‡∏°‡πÄ‡∏•‡∏Å‡∏∏‡∏•",
                icon: "üß™",
                question: "DNA ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ö‡∏™‡πÉ‡∏î‡∏ö‡πâ‡∏≤‡∏á?",
                choices: ["A, T, G, C", "A, U, G, C", "A, T, G, U", "T, U, G, C"],
                correct: 0,
                explanation: "DNA ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ö‡∏™ 4 ‡∏ä‡∏ô‡∏¥‡∏î ‡∏Ñ‡∏∑‡∏≠ Adenine (A), Thymine (T), Guanine (G), ‡πÅ‡∏•‡∏∞ Cytosine (C)",
                image: "üß™"
            },
            {
                topic: "‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤",
                icon: "üõ°Ô∏è",
                question: "‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ?",
                choices: ["‡πÄ‡∏ã‡∏•‡∏•‡πå T", "‡πÄ‡∏ã‡∏•‡∏•‡πå B", "‡πÄ‡∏ã‡∏•‡∏•‡πå NK", "‡πÅ‡∏°‡∏Ñ‡πÇ‡∏Ñ‡∏£‡∏ü‡∏≤‡∏à"],
                correct: 1,
                explanation: "‡πÄ‡∏ã‡∏•‡∏•‡πå B (B cells) ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏à‡∏∞‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Plasma cells ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ",
                image: "üõ°Ô∏è"
            }
        ];

        // Shuffle questions
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Initialize game
        shuffleArray(questions);

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            if (username.trim()) {
                playerName = username;
                startGame();
            }
        });

        function startGame() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('tutorialScreen').classList.remove('hidden');
        }

        document.getElementById('startGameBtn').addEventListener('click', function() {
            document.getElementById('tutorialScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            document.getElementById('playerName').textContent = playerName;
            startTimer();
            loadQuestion();
            updateLabToolsDisplay();
        });

        function startTimer() {
            gameTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = `‚è∞ ${timeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
               
                if (timeLeft <= 10) {
                    document.getElementById('timer').classList.add('timer-critical');
                }
               
                if (timeLeft <= 0) {
                    clearInterval(gameTimer);
                    timeUp();
                }
            }, 1000);
        }

        function timeUp() {
            wrongAnswers++;
            combo = 0;
            const character = characters[currentCharacter];
            updateCharacterDialog(character.dialogs.timeUp);
            document.getElementById('nextBtn').disabled = true;
            showResult(false, "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‚è∞");
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                showFinalResult();
                return;
            }

            const q = questions[currentQuestion];
           
            // Change character every few questions
            if (currentQuestion % 3 === 0) {
                const characterKeys = Object.keys(characters);
                currentCharacter = characterKeys[Math.floor(currentQuestion / 3) % characterKeys.length];
                updateCharacterDisplay();
            }
           
            // Update UI
            document.getElementById('questionIcon').textContent = q.icon;
            document.getElementById('questionTopic').textContent = q.topic;
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('level').textContent = `üìä ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${currentQuestion + 1}`;
           
            // Show character encouragement
            if (currentQuestion > 0) {
                const character = characters[currentCharacter];
                const encouragements = character.dialogs.encouragement;
                updateCharacterDialog(encouragements[Math.floor(Math.random() * encouragements.length)]);
            }
           
            // Show image if available
            if (q.image) {
                document.getElementById('questionImage').classList.remove('hidden');
                document.getElementById('questionImageIcon').textContent = q.image;
            } else {
                document.getElementById('questionImage').classList.add('hidden');
            }
           
            // Update progress
            const progress = ((currentQuestion) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentQuestion}/${questions.length}`;
           
            // Generate choices
            const container = document.getElementById('choicesContainer');
            container.innerHTML = '';
           
            q.choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.className = 'choice-btn bg-gradient-to-r from-gray-100 to-gray-200 hover:from-blue-100 hover:to-blue-200 text-gray-800 py-4 px-6 rounded-lg font-medium transition-all duration-300 text-left';
                button.innerHTML = `
                    <div class="flex items-center">
                        <span class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center mr-3 text-sm font-bold">
                            ${String.fromCharCode(65 + index)}
                        </span>
                        <span>${choice}</span>
                    </div>
                `;
                button.addEventListener('click', () => selectAnswer(index));
                container.appendChild(button);
            });
           
            // Hide explanation
            document.getElementById('explanation').classList.add('hidden');
           
            // Reset timer and enable next button
            timeLeft = 30;
            document.getElementById('timer').classList.remove('timer-critical');
            document.getElementById('nextBtn').disabled = false;
           
            // Create lab atmosphere
            createLabParticles();
        }
       
        function updateCharacterDisplay() {
            const character = characters[currentCharacter];
            document.getElementById('characterAvatar').textContent = character.avatar;
            document.getElementById('characterName').textContent = character.name;
            updateCharacterDialog(character.dialogs.welcome);
        }
       
        function updateCharacterDialog(message) {
            const dialogElement = document.getElementById('characterDialog');
            dialogElement.style.opacity = '0';
            setTimeout(() => {
                dialogElement.textContent = message;
                dialogElement.style.opacity = '1';
            }, 200);
        }

        function selectAnswer(selectedIndex) {
            clearInterval(gameTimer);
           
            const q = questions[currentQuestion];
            const isCorrect = selectedIndex === q.correct;
            const buttons = document.querySelectorAll('.choice-btn');
            const character = characters[currentCharacter];
           
            // Disable all buttons and next button
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            document.getElementById('nextBtn').disabled = true;
           
            // Show correct/wrong
            buttons[selectedIndex].classList.add(isCorrect ? 'correct' : 'wrong');
            if (!isCorrect) {
                buttons[q.correct].classList.add('correct');
            }
           
            // Show character reaction
            if (isCorrect) {
                const correctDialogs = character.dialogs.correct;
                updateCharacterDialog(correctDialogs[Math.floor(Math.random() * correctDialogs.length)]);
            } else {
                const wrongDialogs = character.dialogs.wrong;
                updateCharacterDialog(wrongDialogs[Math.floor(Math.random() * wrongDialogs.length)]);
            }
           
            // Show explanation
            document.getElementById('explanation').classList.remove('hidden');
            document.getElementById('explanationText').textContent = q.explanation;
           
            // Update stats
            if (isCorrect) {
                correctAnswers++;
                combo++;
            } else {
                wrongAnswers++;
                combo = 0;
            }
           
            // Play sound effect
            playLabSound(isCorrect ? 'success' : 'error');
           
            setTimeout(() => {
                showResult(isCorrect);
            }, 2000);
        }

        function showResult(isCorrect, customMessage = null) {
            const modal = document.getElementById('resultModal');
            const icon = document.getElementById('resultIcon');
            const title = document.getElementById('resultTitle');
            const message = document.getElementById('resultMessage');
           
            if (customMessage) {
                icon.textContent = '‚è∞';
                title.textContent = '‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!';
                message.textContent = customMessage;
            } else if (isCorrect) {
                icon.textContent = 'üéâ';
                title.textContent = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!';
                message.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!';
            } else {
                icon.textContent = 'üòÖ';
                title.textContent = '‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß!';
                message.textContent = '‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ!';
            }
           
            // Calculate score
            let baseScore = isCorrect ? 100 : 0;
            let timeBonus = isCorrect ? Math.max(0, timeLeft * 2) : 0;
            let comboBonus = isCorrect && combo > 1 ? (combo - 1) * 50 : 0;
            let totalRoundScore = baseScore + timeBonus + comboBonus;
           
            // Apply double score if active
            if (isDoubleScore && isCorrect) {
                totalRoundScore *= 2;
                isDoubleScore = false;
                showAchievement('ü¶† ‡πÄ‡∏ã‡∏£‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏°‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô x2');
            }
           
            score += totalRoundScore;
           
            // Update score breakdown
            document.getElementById('baseScore').textContent = `+${baseScore}`;
            document.getElementById('timeBonus').textContent = `+${timeBonus}`;
            document.getElementById('comboBonus').textContent = `+${comboBonus}`;
            document.getElementById('totalScore').textContent = `+${totalRoundScore}`;
           
            // Update UI
            document.getElementById('score').textContent = `üèÜ ${score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
            document.getElementById('combo').textContent = `üî• ${combo} ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô`;
           
            // Show achievements
            if (combo === 3) showAchievement('üî• Combo x3! ‡πÑ‡∏î‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°!');
            if (combo === 5) showAchievement('‚ö° Amazing! Combo x5!');
            if (combo === 7) showAchievement('üåü Incredible! Combo x7!');
           
            // Add bonus tools for high combos
            if (combo % 3 === 0 && combo > 0) {
                labTools.microscope++;
                updateLabToolsDisplay();
            }
           
            modal.classList.remove('hidden');
           
            if (isCorrect) {
                createCelebrationParticles();
            }
        }

        function showFinalResult() {
            const modal = document.getElementById('finalModal');
            const finalScore = document.getElementById('finalScore');
            const correctCount = document.getElementById('correctCount');
            const wrongCount = document.getElementById('wrongCount');
            const gradeText = document.getElementById('gradeText');
            const gradeComment = document.getElementById('gradeComment');
           
            finalScore.textContent = score;
            correctCount.textContent = correctAnswers;
            wrongCount.textContent = wrongAnswers;
           
            // Calculate grade
            const percentage = (correctAnswers / questions.length) * 100;
            let grade, comment;
           
            if (percentage >= 90) {
                grade = 'A+';
                comment = 'üèÜ ‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏ó‡∏û! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!';
            } else if (percentage >= 80) {
                grade = 'A';
                comment = 'üåü ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏°‡∏≤‡∏Å!';
            } else if (percentage >= 70) {
                grade = 'B+';
                comment = 'üëç ‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á!';
            } else if (percentage >= 60) {
                grade = 'B';
                comment = 'üòä ‡∏î‡∏µ! ‡∏•‡∏≠‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡∏∞!';
            } else if (percentage >= 50) {
                grade = 'C+';
                comment = 'üìö ‡∏ú‡πà‡∏≤‡∏ô! ‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°!';
            } else {
                grade = 'F';
                comment = 'üí™ ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°!';
            }
           
            gradeText.textContent = `‡πÄ‡∏Å‡∏£‡∏î ${grade}`;
            gradeComment.textContent = comment;
           
            modal.classList.remove('hidden');
            createCelebrationParticles();
        }

        // Lab tools functionality
        document.getElementById('microscopeBtn').addEventListener('click', function() {
            if (labTools.microscope > 0) {
                labTools.microscope--;
                updateLabToolsDisplay();
                showHint();
                playLabSound('tool');
            }
        });

        document.getElementById('dnaBtn').addEventListener('click', function() {
            if (labTools.dna > 0) {
                labTools.dna--;
                updateLabToolsDisplay();
                skipQuestion();
                playLabSound('tool');
            }
        });

        document.getElementById('chemicalBtn').addEventListener('click', function() {
            if (labTools.chemical > 0) {
                labTools.chemical--;
                updateLabToolsDisplay();
                addTime();
                playLabSound('tool');
            }
        });

        document.getElementById('serumBtn').addEventListener('click', function() {
            if (labTools.serum > 0) {
                labTools.serum--;
                updateLabToolsDisplay();
                activateDoubleScore();
                playLabSound('tool');
            }
        });

        function updateLabToolsDisplay() {
            document.getElementById('microscopeCount').textContent = labTools.microscope;
            document.getElementById('dnaCount').textContent = labTools.dna;
            document.getElementById('chemicalCount').textContent = labTools.chemical;
            document.getElementById('serumCount').textContent = labTools.serum;
           
            // Disable buttons if no tools left
            document.getElementById('microscopeBtn').disabled = labTools.microscope <= 0;
            document.getElementById('dnaBtn').disabled = labTools.dna <= 0;
            document.getElementById('chemicalBtn').disabled = labTools.chemical <= 0;
            document.getElementById('serumBtn').disabled = labTools.serum <= 0;
        }

        function showHint() {
            const q = questions[currentQuestion];
            const buttons = document.querySelectorAll('.choice-btn');
            const character = characters[currentCharacter];
           
            // Highlight correct answer
            buttons[q.correct].style.background = 'linear-gradient(45deg, #10b981, #059669)';
            buttons[q.correct].style.color = 'white';
            buttons[q.correct].style.animation = 'correctPulse 1s ease-in-out infinite';
           
            // Show character hint dialog
            updateCharacterDialog(character.dialogs.hint);
           
            showAchievement('üî¨ ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∏‡∏•‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡πÅ‡∏•‡πâ‡∏ß!');
           
            setTimeout(() => {
                buttons[q.correct].style.background = '';
                buttons[q.correct].style.color = '';
                buttons[q.correct].style.animation = '';
            }, 3000);
        }

        function skipQuestion() {
            clearInterval(gameTimer);
            correctAnswers++; // Count as correct
            combo++;
            score += 50; // Reduced score for skipping
           
            showAchievement('üß¨ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå DNA ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß!');
           
            setTimeout(() => {
                nextQuestion();
            }, 1500);
        }

        function addTime() {
            timeLeft += 15;
            showAchievement('‚öóÔ∏è ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤ +15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ!');
        }

        function activateDoubleScore() {
            isDoubleScore = true;
            showAchievement('ü¶† ‡πÄ‡∏ã‡∏£‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏°‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 2 ‡πÄ‡∏ó‡πà‡∏≤!');
        }

        function showAchievement(text) {
            const achievement = document.createElement('div');
            achievement.className = 'achievement-popup';
            achievement.textContent = text;
            document.body.appendChild(achievement);
           
            setTimeout(() => {
                achievement.remove();
            }, 3000);
        }

        function createLabParticles() {
            const colors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6'];
           
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.style.position = 'fixed';
                    particle.style.width = '4px';
                    particle.style.height = '4px';
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.borderRadius = '50%';
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.top = window.innerHeight + 'px';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '998';
                    particle.style.animation = 'particleFloat 4s ease-out forwards';
                   
                    document.body.appendChild(particle);
                   
                    setTimeout(() => {
                        particle.remove();
                    }, 4000);
                }, i * 200);
            }
        }

        function createCelebrationParticles() {
            const colors = ['#fbbf24', '#10b981', '#3b82f6', '#ef4444', '#8b5cf6'];
           
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = (window.innerWidth / 2 + (Math.random() - 0.5) * 200) + 'px';
                    particle.style.top = (window.innerHeight / 2) + 'px';
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                   
                    document.getElementById('particleSystem').appendChild(particle);
                   
                    setTimeout(() => {
                        particle.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        function playLabSound(type) {
            // Create audio context for lab sound effects
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
               
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
               
                switch(type) {
                    case 'success':
                        oscillator.frequency.setValueAtTime(523, audioContext.currentTime);
                        oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1);
                        oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2);
                        break;
                    case 'error':
                        oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                        oscillator.frequency.setValueAtTime(150, audioContext.currentTime + 0.2);
                        break;
                    case 'tool':
                        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
                        break;
                }
               
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
               
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                // Fallback if audio context fails
                console.log('Audio not supported');
            }
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        // Next button functionality
        document.getElementById('nextBtn').addEventListener('click', function() {
            if (!this.disabled) {
                clearInterval(gameTimer);
                wrongAnswers++; // Count as wrong for skipping
                combo = 0;
                const character = characters[currentCharacter];
                updateCharacterDialog("‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞! ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡∏∞! üìö");
               
                setTimeout(() => {
                    nextQuestion();
                }, 1500);
            }
        });

        // Event listeners
        document.getElementById('nextQuestion').addEventListener('click', function() {
            document.getElementById('resultModal').classList.add('hidden');
            nextQuestion();
        });

        document.getElementById('playAgain').addEventListener('click', function() {
            // Reset game
            currentQuestion = 0;
            score = 0;
            combo = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            isDoubleScore = false;
           
            labTools = {
                microscope: 3,
                dna: 2,
                chemical: 2,
                serum: 1
            };
           
            shuffleArray(questions);
           
            document.getElementById('finalModal').classList.add('hidden');
            loadQuestion();
            updateLabToolsDisplay();
            startTimer();
        });

        // Close modals when clicking outside
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
                nextQuestion();
            }
        });

        document.getElementById('finalModal').addEventListener('click', function(e) {
            if (e.target === this) {
                // Don't close final modal by clicking outside
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97b7aa2fe1fd6141',t:'MTc1NzI2MzQwMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>